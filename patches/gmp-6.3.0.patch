--- aclocal.m4.orig	2026-02-22 22:27:32
+++ aclocal.m4	2026-02-22 22:32:47
@@ -1511,6 +1511,17 @@
 _LT_DECL([], [AR], [1], [The archiver])
 _LT_DECL([], [AR_FLAGS], [1], [Flags to create an archive])
 
+case $host_os in
+  folios* | strata-folios*)
+    AR='$LD -r -o'
+    AR_FLAGS=""
+    ARFLAGS=""
+    ;;
+  *)
+    test ${AR_FLAGS+y} || AR_FLAGS=${ARFLAGS-cr}
+    ;;
+esac
+
 AC_CACHE_CHECK([for archiver @FILE support], [lt_cv_ar_at_file],
   [lt_cv_ar_at_file=no
    AC_COMPILE_IFELSE([AC_LANG_PROGRAM],
@@ -1554,21 +1565,31 @@
     [Commands used to install an old-style archive])
 
 # Determine commands to create old-style static archives.
-old_archive_cmds='$AR $AR_FLAGS $oldlib$oldobjs'
-old_postinstall_cmds='chmod 644 $oldlib'
-old_postuninstall_cmds=
-
-if test -n "$RANLIB"; then
-  case $host_os in
-  bitrig* | openbsd*)
-    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB -t \$tool_oldlib"
+case $host_os in
+  folios* | strata-folios*)
+    old_archive_cmds='$LD -r -o $oldlib $oldobjs'
+    old_postinstall_cmds='chmod 644 $oldlib'
+    old_postuninstall_cmds=
+    RANLIB=:
     ;;
   *)
-    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB \$tool_oldlib"
+    old_archive_cmds='$AR $AR_FLAGS $oldlib$oldobjs'
+    old_postinstall_cmds='chmod 644 $oldlib'
+    old_postuninstall_cmds=
+
+    if test -n "$RANLIB"; then
+      case $host_os in
+      bitrig* | openbsd*)
+        old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB -t \$tool_oldlib"
+        ;;
+      *)
+        old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB \$tool_oldlib"
+        ;;
+      esac
+      old_archive_cmds="$old_archive_cmds~\$RANLIB \$tool_oldlib"
+    fi
     ;;
-  esac
-  old_archive_cmds="$old_archive_cmds~\$RANLIB \$tool_oldlib"
-fi
+esac
 
 case $host_os in
   darwin*)
@@ -2669,6 +2690,21 @@
   shlibpath_var=LD_LIBRARY_PATH
   ;;
 
+folios* | strata*-folios*)
+  version_type=linux # correct to gnu/linux during the next big refactor
+  need_lib_prefix=no
+  need_version=no
+  shrext_cmds='`test .$module = .yes && echo .mod || echo .dl`'
+  dynamic_linker="foliOS runtime linker"
+  library_names_spec='$libname$shared_ext'
+  soname_spec='$libname$shared_ext'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  link_all_deplibs=no
+  hardcode_into_libs=yes
+  sys_lib_dlsearch_path_spec=''
+  ;;
+
 freebsd* | dragonfly*)
   # DragonFly does not have aout.  When/if they implement a new
   # versioning mechanism, adjust this.
@@ -3391,6 +3427,9 @@
       reload_cmds='$LD$reload_flag -o $output$reload_objs'
     fi
     ;;
+  folios*)
+    reload_cmds='$LD -r -o $output$reload_objs'
+    ;;
 esac
 _LT_TAGDECL([], [reload_flag], [1], [How to create reloadable object files])dnl
 _LT_TAGDECL([], [reload_cmds], [2])dnl
@@ -3499,6 +3538,10 @@
   ;;
 
 darwin* | rhapsody*)
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+folios* | strata*-folios*)
   lt_cv_deplibs_check_method=pass_all
   ;;
 
@@ -5139,6 +5182,20 @@
       fi
       ;;
 
+    folios* | strata*-folios*)
+      libext=sl
+      shrext_cmds='`test .$module = .yes && echo .mod || echo .dl`'
+      _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags $wl-soname $wl$soname -o $lib'
+      if test yes = "$supports_anon_versioning"; then
+        _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags $wl-soname $wl$soname $wl-version-script $wl$export_symbols -o $lib'
+      fi
+      _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='$wl-rpath $wl$libdir'
+      _LT_TAGVAR(hardcode_direct, $1)=yes
+      _LT_TAGVAR(hardcode_minus_L, $1)=no
+      _LT_TAGVAR(link_all_deplibs, $1)=no
+      _LT_TAGVAR(old_archive_cmds, $1)='$LD -r -o $oldlib $oldobjs'
+      ;;
+
     haiku*)
       _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags $wl-soname $wl$soname -o $lib'
       _LT_TAGVAR(link_all_deplibs, $1)=yes
@@ -5644,6 +5701,18 @@
       _LT_TAGVAR(hardcode_shlibpath_var, $1)=no
       ;;
 
+    folios* | strata*-folios*)
+      libext=sl
+      shrext_cmds='`test .$module = .yes && echo .mod || echo .dl`'
+      _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags $wl-soname $wl$soname -o $lib'
+      _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags $wl-soname $wl$soname $wl-version-script $wl$export_symbols -o $lib'
+      _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='$wl-rpath $wl$libdir'
+      _LT_TAGVAR(hardcode_direct, $1)=yes
+      _LT_TAGVAR(hardcode_minus_L, $1)=no
+      _LT_TAGVAR(link_all_deplibs, $1)=no
+      _LT_TAGVAR(old_archive_cmds, $1)='$LD -r -o $oldlib $oldobjs'
+      ;;
+
     # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
     # support.  Future versions do this automatically, but an explicit c++rt0.o
     # does not break anything, and helps significantly (at the cost of a little
@@ -6758,6 +6827,20 @@
 	    _LT_TAGVAR(ld_shlibs, $1)=no
 	    ;;
         esac
+        ;;
+
+      folios* | strata*-folios*)
+        libext=sl
+        shrext_cmds='`test .$module = .yes && echo .mod || echo .dl`'
+        _LT_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags $wl-soname $wl$soname -o $lib'
+        if test yes = "$supports_anon_versioning"; then
+          _LT_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags $wl-soname $wl$soname $wl-version-script $wl$export_symbols -o $lib'
+        fi
+        _LT_TAGVAR(hardcode_libdir_flag_spec, $1)='$wl-rpath $wl$libdir'
+        _LT_TAGVAR(hardcode_direct, $1)=yes
+        _LT_TAGVAR(hardcode_minus_L, $1)=no
+        _LT_TAGVAR(link_all_deplibs, $1)=no
+	      _LT_TAGVAR(old_archive_cmds, $1)='$LD -r -o $oldlib $oldobjs'
         ;;
 
       freebsd2.*)
