diff --color -Naru bzip2-src.orig/Makefile bzip2-src/Makefile
--- bzip2-src.orig/Makefile	2026-02-23 23:01:50
+++ bzip2-src/Makefile	2026-02-23 23:04:41
@@ -16,8 +16,7 @@
 
 # To assist in cross-compiling
 CC=gcc
-AR=ar
-RANLIB=ranlib
+LD=ld
 LDFLAGS=
 
 BIGFILES=-D_FILE_OFFSET_BITS=64
@@ -35,32 +34,27 @@
       decompress.o \
       bzlib.o
 
-all: libbz2.a bzip2 bzip2recover test
+all: bz2.sl bzip2.app bzip2recover.app test
 
-bzip2: libbz2.a bzip2.o
-	$(CC) $(CFLAGS) $(LDFLAGS) -o bzip2 bzip2.o -L. -lbz2
+bzip2.app: bz2.sl bzip2.o
+	$(CC) $(CFLAGS) $(LDFLAGS) -o bzip2.app bzip2.o -L. -lbz2
 
-bzip2recover: bzip2recover.o
-	$(CC) $(CFLAGS) $(LDFLAGS) -o bzip2recover bzip2recover.o
+bzip2recover.app: bzip2recover.o
+	$(CC) $(CFLAGS) $(LDFLAGS) -o bzip2recover.app bzip2recover.o
 
-libbz2.a: $(OBJS)
-	rm -f libbz2.a
-	$(AR) cq libbz2.a $(OBJS)
-	@if ( test -f $(RANLIB) -o -f /usr/bin/ranlib -o \
-		-f /bin/ranlib -o -f /usr/ccs/bin/ranlib ) ; then \
-		echo $(RANLIB) libbz2.a ; \
-		$(RANLIB) libbz2.a ; \
-	fi
+bz2.sl: $(OBJS)
+	rm -f bz2.sl
+	$(LD) -r -o bz2.sl $(OBJS)
 
 check: test
-test: bzip2
+test: bzip2.app
 	@cat words1
-	./bzip2 -1  < sample1.ref > sample1.rb2
-	./bzip2 -2  < sample2.ref > sample2.rb2
-	./bzip2 -3  < sample3.ref > sample3.rb2
-	./bzip2 -d  < sample1.bz2 > sample1.tst
-	./bzip2 -d  < sample2.bz2 > sample2.tst
-	./bzip2 -ds < sample3.bz2 > sample3.tst
+	./bzip2.app -1  < sample1.ref > sample1.rb2
+	./bzip2.app -2  < sample2.ref > sample2.rb2
+	./bzip2.app -3  < sample3.ref > sample3.rb2
+	./bzip2.app -d  < sample1.bz2 > sample1.tst
+	./bzip2.app -d  < sample2.bz2 > sample2.tst
+	./bzip2.app -ds < sample3.bz2 > sample3.tst
 	cmp sample1.bz2 sample1.rb2 
 	cmp sample2.bz2 sample2.rb2
 	cmp sample3.bz2 sample3.rb2
@@ -69,26 +63,26 @@
 	cmp sample3.tst sample3.ref
 	@cat words3
 
-install: bzip2 bzip2recover
+install: bzip2.app bzip2recover.app
 	if ( test ! -d $(PREFIX)/bin ) ; then mkdir -p $(PREFIX)/bin ; fi
 	if ( test ! -d $(PREFIX)/lib ) ; then mkdir -p $(PREFIX)/lib ; fi
 	if ( test ! -d $(PREFIX)/man ) ; then mkdir -p $(PREFIX)/man ; fi
 	if ( test ! -d $(PREFIX)/man/man1 ) ; then mkdir -p $(PREFIX)/man/man1 ; fi
 	if ( test ! -d $(PREFIX)/include ) ; then mkdir -p $(PREFIX)/include ; fi
-	cp -f bzip2 $(PREFIX)/bin/bzip2
-	cp -f bzip2 $(PREFIX)/bin/bunzip2
-	cp -f bzip2 $(PREFIX)/bin/bzcat
-	cp -f bzip2recover $(PREFIX)/bin/bzip2recover
-	chmod a+x $(PREFIX)/bin/bzip2
-	chmod a+x $(PREFIX)/bin/bunzip2
-	chmod a+x $(PREFIX)/bin/bzcat
-	chmod a+x $(PREFIX)/bin/bzip2recover
+	cp -f bzip2.app $(PREFIX)/bin/bzip2.app
+	cp -f bzip2.app $(PREFIX)/bin/bunzip2.app
+	cp -f bzip2.app $(PREFIX)/bin/bzcat.app
+	cp -f bzip2recover.app $(PREFIX)/bin/bzip2recover.app
+	chmod a+x $(PREFIX)/bin/bzip2.app
+	chmod a+x $(PREFIX)/bin/bunzip2.app
+	chmod a+x $(PREFIX)/bin/bzcat.app
+	chmod a+x $(PREFIX)/bin/bzip2recover.app
 	cp -f bzip2.1 $(PREFIX)/man/man1
 	chmod a+r $(PREFIX)/man/man1/bzip2.1
 	cp -f bzlib.h $(PREFIX)/include
 	chmod a+r $(PREFIX)/include/bzlib.h
-	cp -f libbz2.a $(PREFIX)/lib
-	chmod a+r $(PREFIX)/lib/libbz2.a
+	cp -f bz2.sl $(PREFIX)/lib
+	chmod a+r $(PREFIX)/lib/bz2.sl
 	cp -f bzgrep $(PREFIX)/bin/bzgrep
 	ln -s -f $(PREFIX)/bin/bzgrep $(PREFIX)/bin/bzegrep
 	ln -s -f $(PREFIX)/bin/bzgrep $(PREFIX)/bin/bzfgrep
@@ -109,7 +103,7 @@
 	echo ".so man1/bzdiff.1" > $(PREFIX)/man/man1/bzcmp.1
 
 clean: 
-	rm -f *.o libbz2.a bzip2 bzip2recover \
+	rm -f *.o bz2.sl bzip2.app bzip2recover.app \
 	sample1.rb2 sample2.rb2 sample3.rb2 \
 	sample1.tst sample2.tst sample3.tst
 
diff --color -Naru bzip2-src.orig/Makefile-bz2_dl bzip2-src/Makefile-bz2_dl
--- bzip2-src.orig/Makefile-bz2_dl	1970-01-01 09:00:00
+++ bzip2-src/Makefile-bz2_dl	2026-02-23 23:12:22
@@ -0,0 +1,59 @@
+
+# This Makefile builds a shared version of the library, 
+# bz2.dl.1.0.8, with soname bz2.dl.1.0,
+# at least on x86-Linux (RedHat 7.2), 
+# with gcc-2.96 20000731 (Red Hat Linux 7.1 2.96-98).  
+# Please see the README file for some important info 
+# about building the library like this.
+
+# ------------------------------------------------------------------
+# This file is part of bzip2/libbzip2, a program and library for
+# lossless, block-sorting data compression.
+#
+# bzip2/libbzip2 version 1.0.8 of 13 July 2019
+# Copyright (C) 1996-2019 Julian Seward <jseward@acm.org>
+#
+# Please read the WARNING, DISCLAIMER and PATENTS sections in the 
+# README file.
+#
+# This program is released under the terms of the license contained
+# in the file LICENSE.
+# ------------------------------------------------------------------
+
+
+SHELL=/bin/sh
+CC=gcc
+BIGFILES=-D_FILE_OFFSET_BITS=64
+CFLAGS=-fpic -fPIC -Wall -Winline -O2 -g $(BIGFILES)
+
+OBJS= blocksort.o  \
+      huffman.o    \
+      crctable.o   \
+      randtable.o  \
+      compress.o   \
+      decompress.o \
+      bzlib.o
+
+all: $(OBJS)
+	$(CC) -shared -Wl,-soname -Wl,bz2.dl.1.0 -o bz2.dl.1.0.8 $(OBJS)
+	$(CC) $(CFLAGS) -o bzip2-shared bzip2.c bz2.dl.1.0.8
+	rm -f bz2.dl.1.0
+	ln -s bz2.dl.1.0.8 bz2.dl.1.0
+
+clean: 
+	rm -f $(OBJS) bzip2.o bz2.dl.1.0.8 bz2.dl.1.0 bzip2-shared
+
+blocksort.o: blocksort.c
+	$(CC) $(CFLAGS) -c blocksort.c
+huffman.o: huffman.c
+	$(CC) $(CFLAGS) -c huffman.c
+crctable.o: crctable.c
+	$(CC) $(CFLAGS) -c crctable.c
+randtable.o: randtable.c
+	$(CC) $(CFLAGS) -c randtable.c
+compress.o: compress.c
+	$(CC) $(CFLAGS) -c compress.c
+decompress.o: decompress.c
+	$(CC) $(CFLAGS) -c decompress.c
+bzlib.o: bzlib.c
+	$(CC) $(CFLAGS) -c bzlib.c
